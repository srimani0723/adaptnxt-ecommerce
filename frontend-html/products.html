<head>
  <style>
  body {
    font-family: sans-serif;
    background: #f9f9f9;
    padding: 2rem;
    max-width: 600px;
    margin: auto;
  }

  h2 {
    text-align: center;
    margin-bottom: 1rem;
  }

  form {
    background: #fff;
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  input, select {
    display: block;
    width: 100%;
    margin-bottom: 1rem;
    padding: 0.5rem;
    border-radius: 4px;
    border: 1px solid #ccc;
  }

  button {
    background: #007bff;
    color: #fff;
    border: none;
    padding: 0.6rem 1.2rem;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 0.5rem;
  }

  button:hover {
    background: #0056b3;
  }

  .back-button {
    background-color: transparent;
    color: blue;
    font-weight: bold;
    margin-bottom: 1rem;
    padding: 5px;
  }

  .back-button:hover {
    background: rgb(241, 245, 255);
  }

  .entry {
    background: #fff;
    padding: 1rem;
    margin-bottom: 1rem;
    border-radius: 8px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.06);
  }
</style>
</head>

<button class="back-button" onclick="window.location.href='index.html'">⬅ Back to Home</button>

<input id="searchBox" placeholder="Search" />
<div id="products"></div>

<script>
const token = localStorage.getItem('token');

document.getElementById('searchBox').addEventListener('input', async (e) => {
  const search = e.target.value;
  const res = await fetch(`http://localhost:5000/products?search=${search}`);
  const data = await res.json();
  const container = document.getElementById('products');
  container.innerHTML = data.products.map(p => `
    <div>
      <h3>${p.name}</h3>
      <p>₹${p.price}</p>
      <button onclick="addToCart('${p._id}')">Add to Cart</button>
    </div>
  `).join('');
});

async function addToCart(productId) {
  await fetch('http://localhost:5000/cart', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      Authorization: `Bearer ${token}`
    },
    body: JSON.stringify({ productId, quantity: 1 })
  });
  alert('Product added');
}
</script>